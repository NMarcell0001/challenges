<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Launch Library</title>
    <link rel="stylesheet" href="./css/style.css"> 
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>

<body class="flex flex-col min-h-screen">
    <header class="bg-blue-600 text-white p-4">
        <div class="container mx-auto flex justify-between items-center">
            <h1 class="text-3xl font-bold"><a href="/launches" class="hover:underline">Launch Library</a></h1>
            <nav>
                <ul class="flex space-x-6">
                    <li><a href="/launches" class="hover:underline">Launches</a></li>
                    <li><a href="/spacecrafts" class="hover:underline">Spacecrafts</a></li>
                    <li><a href="/astronauts" class="hover:underline">Astronauts</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <% if (error) { %>
        <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mx-auto my-4 w-11/12 md:w-3/4 lg:w-1/2"
            role="alert">
            <strong class="font-bold">Error!</strong>
            <span class="block sm:inline ml-2">
                <%= error %>
            </span>
        </div>
    <% } %>

    <main class="flex flex-grow container mx-auto my-4">
        <section id="list-view" class="w-full p-4">
            <h2 class="text-xl font-semibold mb-4">Upcoming Launches</h2>
            
            <ul class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                <% if (launches && launches.length > 0) { %>
                    <% launches.forEach(launch => { %>
                        <li class="flex">
                            <article
                                class="border border-blue-500 rounded-lg p-4 flex flex-col items-center justify-between text-center bg-white shadow-md w-full"
                                itemscope itemtype="http://schema.org/Event">
                                <figure class="mb-3 w-full">
                                    <% if (launch.image) { %>
                                        <img src="<%= launch.image %>" alt="<%= launch.name %> launch image"
                                            class="w-full h-32 object-cover rounded-md"
                                            itemprop="image">
                                    <% } else { %>
                                        <div
                                            class="w-full h-32 bg-gray-200 flex items-center justify-center rounded-md text-gray-500 text-sm"
                                            role="img" aria-label="No image available for <%= launch.name %> launch">
                                            No Image</div>
                                    <% } %>
                                </figure>
                                <h3 class="text-lg font-medium mb-2" itemprop="name">
                                    <%= launch.name %>
                                </h3>
                                <p class="text-sm text-gray-600 mb-4">
                                    Date: <time datetime="<%= launch.net %>" itemprop="startDate"><%= new Date(launch.net).toLocaleDateString() %></time>
                                </p>
                                <a href="/launch/<%= launch.id %>"
                                    class="bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600 transition duration-300">Read
                                    More...</a>
                            </article>
                        </li>
                    <% }); %>
                <% } else { %>
                    <li class="col-span-full text-center text-gray-500">No launches found or data loading error.</li>
                <% } %>
            </ul>
        </section>
    </main>

    <footer class="bg-gray-800 text-white text-center p-4 mt-auto">
        <p>&copy; 2025 Marcell Nemes</p>
    </footer>
</body>

</html>